/**
  * music21j 0.8.0 built on   * 2016-08-27.
 * Copyright (c) 2013-2016 Michael Scott Cuthbert and cuthbertLab
 *
 * http://github.com/cuthbertLab/music21j
 */

!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(require("vexflow")):"function"==typeof define&&define.amd?define(["vexflow"],b):b(a.Vex)}(this,function(a){"use strict";var b={};b.ProtoM21Object=function(){this.classes=["ProtoM21Object"],this.isProtoM21Object=!0,this.isMusic21Object=!1,this._cloneCallbacks={}},b.ProtoM21Object.prototype.clone=function(){var a=new this.constructor;for(var b in this)if(0!=this.hasOwnProperty(b))if(b in this._cloneCallbacks)this._cloneCallbacks[b]===!0?a[b]=this[b]:this._cloneCallbacks[b]===!1?a[b]=void 0:this._cloneCallbacks[b](b,a,this);else if(void 0!==Object.getOwnPropertyDescriptor(this,b).get||void 0!==Object.getOwnPropertyDescriptor(this,b).set);else if("function"==typeof this[b]);else if("object"==typeof this[b]&&null!==this[b]&&this[b].isProtoM21Object)a[b]=this[b].clone();else try{a[b]=this[b]}catch(a){if(!(a instanceof TypeError))throw a;console.log("typeError:",a,b)}return a},b.ProtoM21Object.prototype.isClassOrSubclass=function(a){a instanceof Array==0&&(a=[a]);for(var b=0;b<a.length;b++)if($.inArray(a[b],this.classes)!=-1)return!0;return!1};var c={};c.Articulation=function(){b.ProtoM21Object.call(this),this.classes.push("Articulation"),this.name=void 0,this.placement="above",this.vexflowModifier=void 0,this.setPosition=void 0,this.dynamicScale=1,this.lengthScale=1},c.Articulation.prototype=new b.ProtoM21Object,c.Articulation.prototype.constructor=c.Articulation,c.Articulation.prototype.vexflow=function(){var b=new a.Vex.Flow.Articulation(this.vexflowModifier);return this.setPosition&&b.setPosition(this.setPosition),b},c.LengthArticulation=function(){c.Articulation.call(this),this.classes.push("LengthArticulation")},c.LengthArticulation.prototype=new c.Articulation,c.LengthArticulation.prototype.constructor=c.LengthArticulation,c.DynamicArticulation=function(){c.Articulation.call(this),this.classes.push("DynamicArticulation")},c.DynamicArticulation.prototype=new c.Articulation,c.DynamicArticulation.prototype.constructor=c.DynamicArticulation,c.PitchArticulation=function(){c.Articulation.call(this),this.classes.push("PitchArticulation")},c.PitchArticulation.prototype=new c.Articulation,c.PitchArticulation.prototype.constructor=c.PitchArticulation,c.TimbreArticulation=function(){c.Articulation.call(this),this.classes.push("TimbreArticulation")},c.TimbreArticulation.prototype=new c.Articulation,c.TimbreArticulation.prototype.constructor=c.TimbreArticulation,c.Accent=function(){c.DynamicArticulation.call(this),this.classes.push("Accent"),this.name="accent",this.vexflowModifier="a>",this.dynamicScale=1.5},c.Accent.prototype=new c.DynamicArticulation,c.Accent.prototype.constructor=c.Accent,c.StrongAccent=function(){c.Accent.call(this),this.classes.push("StrongAccent"),this.name="strong accent",this.vexflowModifier="a^",this.dynamicScale=2},c.StrongAccent.prototype=new c.Accent,c.StrongAccent.prototype.constructor=c.StrongAccent,c.Staccato=function(){c.LengthArticulation.call(this),this.classes.push("Staccato"),this.name="staccato",this.vexflowModifier="a."},c.Staccato.prototype=new c.LengthArticulation,c.Staccato.prototype.constructor=c.Staccato,c.Staccatissimo=function(){c.Staccato.call(this),this.classes.push("Staccatissimo"),this.name="staccatissimo",this.vexflowModifier="av"},c.Staccatissimo.prototype=new c.Staccato,c.Staccatissimo.prototype.constructor=c.Staccatissimo,c.Spiccato=function(){c.Staccato.call(this),this.classes.push("Spiccato"),this.name="spiccato",this.vexflowModifier=void 0},c.Spiccato.prototype=new c.Staccato,c.Spiccato.prototype.constructor=c.Spiccato,c.Marcato=function(){c.LengthArticulation.call(this),c.DynamicArticulation.call(this),this.classes.push("Marcato"),this.name="marcato",this.vexflowModifier="a^",this.dynamicScale=1.7},c.Marcato.prototype=new c.LengthArticulation,c.Marcato.prototype.constructor=c.Marcato,c.Tenuto=function(){c.LengthArticulation.call(this),this.classes.push("Tenuto"),this.name="tenuto",this.vexflowModifier="a-"},c.Tenuto.prototype=new c.LengthArticulation,c.Tenuto.prototype.constructor=c.Tenuto,c.tests=function(){test("music21.articulations.Articulation",function(){var a=new music21.articulations.Accent;equal(a.name,"accent","matching names for accent");var b=new music21.articulations.Tenuto;equal(b.name,"tenuto","matching names for tenuto");var c=new music21.note.Note("C");c.articulations.push(a),c.articulations.push(b),equal(c.articulations[0].name,"accent","accent in array"),equal(c.articulations[1].name,"tenuto","tenuto in array")}),test("music21.articulations.Articulation display",function(){var a=new music21.articulations.Marcato;equal(a.name,"marcato","matching names for marcato");var b=new music21.note.Note("D#5");b.articulations.push(a);var c=new music21.note.Note("D#5"),d=new music21.stream.Measure;d.append(b),d.append(c),d.append(c.clone()),d.append(b.clone()),d.appendNewCanvas(),ok(!0,"something worked")})},"undefined"==typeof music21&&(music21={VERSION:.8}),require.config({context:"music21"});var d=function(a){var b="";if(0===a.indexOf("//"))b="//",a=a.slice(2),console.log("cdn load: ",b," into ",a);else if(a.indexOf("://")!==-1){var c=a.indexOf("://");b=a.slice(0,c+3),a=a.slice(c+3),console.log("cross-site split",b,a)}for(var d=a.split("/"),e="/"===a.slice(a.length-1,a.length),f=[],g=0;g<d.length;g++){var h=d[g];".."===h?f.length>0&&".."!==f[f.length-1]?f.pop():f.push(".."):f.push(h)}var i=f.join("/");return e&&(i+="/"),i=b+i},e=function(a){for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c],e=d.getAttribute("data-main");if(e&&(/music21/.test(e)||/m21/.test(e))){var f=d.getAttribute(a);return f}}},f="no"!==e("warnBanner");if("undefined"==typeof m21conf){m21conf={};var g=e("m21conf");if(null!==g&&void 0!==g)try{m21conf=JSON.parse(g)}catch(a){console.log("Unable to JSON parse "+g.toString()+" into m21conf")}}"undefined"==typeof m21srcPath&&"undefined"!=typeof require&&(m21srcPath=d(require.toUrl("music21").replace(/\?bust=\w*/,"")+"/..")),music21.m21basePath=d(m21srcPath+"/.."),music21.m21srcPath=m21srcPath,music21.soundfontUrl=music21.m21srcPath+"/ext/soundfonts/FluidR3_GM/";var h={paths:{jquery:d(m21srcPath+"/ext/jquery/jquery-2.1.1.min"),attrchange:d(m21srcPath+"/ext/jqueryPlugins/attrchange"),"jquery-ui":d(m21srcPath+"/ext/jqueryPlugins/jqueryUI/jquery-ui.min"),vexflow:d(m21srcPath+"/ext/vexflow/vexflow-min"),MIDI:d(m21srcPath+"/ext/midijs/build/MIDI"),jasmidMidifile:d(m21srcPath+"/ext/midijs/inc/jasmid/midifile"),jasmidReplayer:d(m21srcPath+"/ext/midijs/inc/jasmid/replayer"),jasmidStream:d(m21srcPath+"/ext/midijs/inc/jasmid/stream"),eventjs:d(m21srcPath+"/ext/midijs/examples/inc/event"),base64Binary:d(m21srcPath+"/ext/midijs/inc/shim/Base64binary"),webMidiApiShim:d(m21srcPath+"/ext/midijs/inc/shim/WebMIDIAPI"),webAudioShim:d(m21srcPath+"/ext/midijs/inc/shim/WebAudioAPI"),es6Shim:d(m21srcPath+"/ext/es6-shim")},packages:[{name:"jsonpickle",location:d(m21srcPath+"/ext/jsonpickle"),main:"main"}],shim:{eventjs:{exports:"eventjs"},webMidiApiShim:{deps:["es6Shim"],exports:"window"},MIDI:{deps:["base64Binary","webAudioShim","jasmidMidifile","jasmidReplayer","jasmidStream","eventjs"],exports:"MIDI"},attrchange:{deps:["jquery"],exports:"jQuery.attrchange"},"jquery-ui":{deps:["jquery"],exports:"jQuery.ui"},vexflow:{deps:["jquery"],exports:"Vex"}}},i=["MIDI","vexflow","jquery","jsonpickle","jquery-ui","attrchange","es6Shim","./music21/moduleLoader"];if(void 0!==m21conf.noLoad&&m21conf.noLoad.forEach(function(a,b,c){var d=i.indexOf(a);d!==-1&&i.splice(d,1)}),void 0===Object.defineProperties&&f){var j=document.createElement("div");j.setAttribute("style","font-size: 40px; padding: 40px 20px 40px 20px; margin-top: 20px; line-height: 50px; width: 500px; height: 400px; color: #ffffff; background-color: #900000;");var k=document.createTextNode("Unfortunately, IE9, Safari 4 or 5 (Leopard/Snow Leopard), and other out-of-date browsers do not work with music21j. Please upgrade your browser w/ the link above.");j.appendChild(k),document.body.appendChild(j);var l=document.createElement("script");l.setAttribute("type","text/javascript"),l.setAttribute("src","http://browser-update.org/update.js"),document.body.appendChild(l)}else"function"==typeof define&&define.amd&&(require.config(h),define(i,function(a,b,c,d){return music21.scriptConfig=m21conf,a&&(music21.MIDI=a),b?music21.Vex=b:console.log("could not load VexFlow"),music21.MIDI&&(void 0===music21.scriptConfig.loadSoundfont||music21.scriptConfig.loadSoundfont!==!1?music21.miditools.loadSoundfont("acoustic_grand_piano"):console.log("skipping loading sound font")),void 0!==music21.scriptConfig.renderHTML&&music21.scriptConfig.renderHTML===!1||c(document).ready(function(){music21.tinyNotation.renderNotationDivs()}),music21}))});
//# sourceMappingURL=music21.min.js.map